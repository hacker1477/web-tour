from flask import Flask, render_template, request, Blueprint

find = Blueprint('find', __name__,static_folder='static', template_folder='templates')

# 数据库
database = {
    "武汉":{
        "概述": "武汉是一座充满活力的城市，拥有丰富的历史文化和美食资源。",
        "交通": "武汉有高铁、飞机、汽车等多种交通方式到达，当地交通以公交、地铁为主。出行前建议购买武汉地铁卡或者武汉公交卡。",
        "住宿": "武汉有多种住宿选择，包括酒店、青年旅社、家庭旅馆等。推荐的青年旅社有“掌中宝”，价格实惠，同时还具有地方特色。",
        "美食": "武汉以口味独特的美食而著称，推荐尝试热干面、豆皮、羊蝎子等知名小吃。夜晚可以去江滩夜市品尝更多本地美食和特色小吃。",
        "景点": [
            {"name": "黄鹤楼", "price": "70元/人", "description": "可以欣赏到美丽的黄鹤楼和长江风景。"},
            {"name": "明孝陵", "price": "40元/人", "description": "可以感受到明朝的历史文化风貌。"},
            {"name": "东湖磨山景区", "price": "40元/人", "description": "包括东湖磨山、龟山、曲湾、毛泽东故居等多个景点，租船游玩更加惬意。"},
            {"name": "古琴台公园", "price": "免费", "description": "集中国传统音乐、文学、书法艺术为一体的主题公园。"},
            {"name": "汉口江滩", "price": "免费", "description": "夜晚灯光闪耀，可欣赏到美丽夜景。"}
        ],
        "注意事项": "在旅行过程中，需要注意安全问题。例如，夜晚不要去人流密集的地方，尤其是避免携带大量现金或贵重物品。"
    },
    "北京": {
        "概述": "北京是中国的首都，也是中国文化和历史最为悠久的城市之一，拥有丰富的旅游资源。",
        "交通": "北京有多种交通方式到达，包括高速铁路、飞机、汽车等。当地交通以公交、地铁为主。出行前建议购买北京地铁卡或者北京公交卡。",
        "住宿": "北京有多种住宿选择，包括五星级酒店、胡同客栈、青年旅社等。推荐的青年旅社有“老北京胡同公寓”，价格实惠，同时还具有传统胡同文化特色。",
        "美食": "北京是中国的美食之都，推荐尝试北京烤鸭、炸酱面、豆汁等知名小吃。夜晚可以去簋街品尝更多本地美食和特色小吃。",
        "景点": [
            {"name": "故宫", "price": "70元/人", "description": "可以欣赏到美丽的黄鹤楼和长江风景。"},
            {"name": "天安门广场", "price": "40元/人", "description": "可以感受到明朝的历史文化风貌。"},
            {"name": "颐和园", "price": "40元/人",
             "description": "包括东湖磨山、龟山、曲湾、毛泽东故居等多个景点，租船游玩更加惬意。"},
            {"name": "长城", "price": "免费", "description": "集中国传统音乐、文学、书法艺术为一体的主题公园。"},
            {"name": "汉口江滩", "price": "免费", "description": "夜晚灯光闪耀，可欣赏到美丽夜景。"}
        ],
        "注意事项": "在旅行过程中，需要注意安全问题。例如，夜晚不要去人流密集的地方，尤其是避免携带大量现金或贵重物品。"
    },
    "上海": {
        "概述": "上海是中国的经济中心和国际大都市，也是中国最现代化、最具时尚感的城市之一。",
        "交通": "上海有高铁、飞机、汽车等多种交通方式到达，当地交通以公交、地铁为主。出行前建议购买上海地铁卡或者上海公交卡。",
        "住宿": "上海有多种住宿选择，包括豪华酒店、精品酒店、青年旅社等。推荐的青年旅社有“南方青年旅社”，位于上海市中心，价格实惠，同时还具有地方特色。",
        "美食": "上海是中国的美食之城，推荐尝试小笼包、糯米鸡、油条等知名小吃。夜晚可以去夜市品尝更多本地美食和特色小吃。",
        "景点": [
            {"name": "外滩", "price": "70元/人", "description": "可以欣赏到美丽的黄鹤楼和长江风景。"},
            {"name": "城隍庙", "price": "40元/人", "description": "可以感受到明朝的历史文化风貌。"},
            {"name": "东方明珠", "price": "40元/人",
             "description": "包括东湖磨山、龟山、曲湾、毛泽东故居等多个景点，租船游玩更加惬意。"},
            {"name": "田子坊", "price": "免费", "description": "集中国传统音乐、文学、书法艺术为一体的主题公园。"},
            {"name": "汉口江滩", "price": "免费", "description": "夜晚灯光闪耀，可欣赏到美丽夜景。"}
        ],
        "注意事项": "在旅行过程中，需要注意安全问题。例如，夜晚不要去人流密集的地方，尤其是避免携带大量现金或贵重物品。"
    },

}


@find.route('/search', methods=['GET', 'POST'])
def search():
    if request.method == 'POST':
        # 获取用户输入的城市名
        city = request.form['city']
        # 查找对应城市的信息
        city_info = database.get(city)
        if city_info:
            return render_template('search.html', city=city, city_info=city_info)
        else:
            error_msg = "抱歉，未找到该城市信息！"
            return render_template('search.html', error_msg=error_msg)
    else:
        return render_template('search.html')
